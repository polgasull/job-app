<section class="section">
  <div class="container">
    <div class="columns is-centered is-variable is-8">
      <div class="column is-7 is-hidden-mobile">
        <%= render 'company_how_it_works' %>
      </div>
      <div class="column is-4">
        <h2 class="title is-4"> <%= icon('far', 'building mr2') %> <%= t('create_company_account') %> </h2>

        <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <%= f.error_notification %>
          <%= f.hidden_field :user_type_id, value: UserType.where(internal_name: 'company').first.id %>

          <div class="field mb5">
            <%= f.label :name, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :name, 
                  required: true, 
                  wrapper: false,
                  autofocus: true, 
                  label: false,
                  input_html: { class: "input" },
                  placeholder: "Empresa Ejemplo SL" %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'building') %>
              </span>
            </div>
          </div>
          <div class="field mb2">
            <%= f.label :email, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :email,
                  required: true,
                  wrapper: false,
                  label: false,
                  input_html: { class:"input" },
                  placeholder: "empresaejemplosl@correo.com" %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'envelope') %>
              </span>
            </div>
          </div>
          <div class="field mb2">
            <%= f.label :password, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :password,
                  required: true,
                  wrapper: false,
                  label: false,
                  input_html: { class: "input", onkeyup: "checkPass(); return false;" },
                  hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length) %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'key') %>
              </span>
            </div>
          </div>
          <div class="field">
            <%= f.label :password_confirmation, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :password_confirmation,
                  required: true,
                  wrapper: false,
                  label: false,                  
                  input_html: { class: "input", onkeyup: "checkPass(); return false;" } %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'key') %>
              </span>
            </div>
          </div>
          <div id="error-message"></div>
          <div class="field mt4">
            <div class="control">
              <%= f.button :submit, 
                t('create_account'), 
                class:"button is-dark is-fullwidth",
                id: "signupSubmit",
                disabled: true %>
            </div>
          </div>
        <% end %>
        <hr>
        <div>
          <%= link_to t('login'), 
            new_user_session_path(:company => "true"), 
            class: "button with-border is-fullwidth" %>
        </div>
      </div>
      <div class="mv5 is-hidden-tablet"></div>
      <div class="column is-7 is-hidden-tablet">
        <%= render "company_how_it_works" %>
      </div>    
    </div>
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <%= image_tag(asset_path('WAH_ESCALERA.png'), alt: "Encuentra todo el Empleo Digital en We Are Hiring", width: 500) %>
  </div>
</section>

<section class="section">
	<div class="container">
		<div class="columns">
			<div class="column has-text-centered">
				<h2 class="title"> Colaboramos con </h2>
			</div>
		</div>
		<%= render 'partners' %>
	</div>
</section>

<%= content_for :head do %>
	<%= render "seo", 
			title: t('seo.company_signup'), 
			description: t('seo.company_signup_description'),
			image: asset_path('logo_black.png') %>
<% end %>

<%= content_for :footer do %>
  <script>
  	AOS.init();
    function checkPass() {
      var pass1 = document.getElementById('user_password');
      var pass2 = document.getElementById('user_password_confirmation');
      var message = document.getElementById('error-message');
      var submitBtn = document.getElementById('signupSubmit');
      var successColor = "#48c78e";
      var successColorLight = "#dff5eb";
      var errorColor = "#f14668";
      var errorColorLight = "#f5b8c4";
        
      if (pass1.value.length >= 8) {
        pass1.style.borderColor = successColor;
        pass1.style.backgroundColor = successColorLight;
        message.style.color = successColor;
        submitBtn.removeAttribute("disabled");
        message.innerHTML = "";
      } else {
        pass1.style.borderColor = errorColor;
        pass1.style.backgroundColor = errorColorLight;
        message.style.color = errorColor;
        submitBtn.setAttribute("disabled", "disabled");
        message.innerHTML = "La contraseña debe contener al menos 8 carácteres"
        return;
      }
      
      if (pass1.value == pass2.value) {
        pass2.style.borderColor = successColor;
        pass2.style.backgroundColor = successColorLight;
        message.style.color = successColor;
        submitBtn.removeAttribute("disabled");
        message.innerHTML = "";
      } else {
        pass2.style.borderColor = errorColor;
        pass2.style.backgroundColor = errorColorLight;
        message.style.color = errorColor;
        message.innerHTML = "Las contraseñas no coinciden";
        submitBtn.setAttribute("disabled", "disabled");
      }
    }  
  </script>
<% end %>