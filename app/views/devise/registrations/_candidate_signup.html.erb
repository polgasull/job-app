
<section class="section">
	<div class="container">
		<div class="columns is-centered is-variable is-8">
      <div class="column is-7 is-hidden-mobile">
        <%= render "candidate_how_it_works" %>
      </div>
			<div class="column is-4">
				<h2 class="title is-4"> <%= icon('fas', 'user mr2') %> <%= t('create_account') %> </h2>
        <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <%= f.error_notification %>
          <%= f.hidden_field :user_type_id, value: UserType.where(internal_name: 'candidate').first.id %>
          <%= f.hidden_field :accepted_terms, value: true %>
          <div class="field mb5">
            <%= f.label :name, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :name, 
                  required: true, 
                  wrapper: false,
                  autofocus: true, 
                  label: false,
                  input_html: { class: "input" },
                  placeholder: "John Smith" %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'user') %>
              </span>
            </div>
          </div>
          <div class="field mb2">
            <%= f.label :email, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :email,
                  required: true,
                  wrapper: false,
                  label: false,
                  input_html: { class:"input" },
                  placeholder: "johnsmith@correo.com" %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'envelope') %>
              </span>
            </div>
          </div>
          <div class="field mb2">
            <%= f.label :password, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :password,
                  required: true,
                  wrapper: false,
                  label: false,
                  input_html: { class: "input", onkeyup: "checkPass(); return false;"  },
                  hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length) %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'key') %>
              </span>
            </div>
          </div>
          <div class="field">
            <%= f.label :password_confirmation, class: 'has-text-weight-bold' %>
            <div class="control has-icons-left">
              <%= f.input :password_confirmation,
                  required: true,
                  wrapper: false,
                  label: false,                  
                  input_html: { class: "input", onkeyup: "checkPass(); return false;" } %>
              <span class="icon is-small is-left">
                <%= icon('fas', 'key') %>
              </span>
            </div>
          </div>
          <div id="error-message"></div>
          <div class="mb2">
            <small class="accept-terms-text pl2">
              Al inscribirme, estoy de acuerdo con la
              <%= link_to 'política de privacidad', privacy_policy_path, target: '_blank' %>, 
              <%= link_to 'aviso legal', legal_terms_path, target: '_blank' %> y 
              <%= link_to 'política de cookies', cookies_policy_path, target: '_blank' %>
              de Wearehiring
            </small>
          </div>
          <div class="field mt3">
            <div class="control is-grouped">
              <%= f.button :submit,
                  t('create_account'),
                  class:"button is-link is-fullwidth",
                  id: "signupSubmit",
                  disabled: true %>
            </div>
          </div>
        <% end %>
        <hr>
        <div class="mt2 has-text-centered">
          <%= link_to user_linkedin_omniauth_authorize_path, class: "button linkedin" do %>
            <%= icon('fab', 'linkedin mr2') %> <%= t('linkedin_signup') %>
          <% end %>
        </div>
        <hr>
        <div class="has-text-centered">
          <span> <%= t('already_account') %> </span>
          <%= link_to t('login'), new_user_session_path(:candidate => "true") %>        
        </div>
			</div>
      <div class="mv5 is-hidden-tablet"></div>
      <div class="column is-7 is-hidden-tablet">
        <%= render "candidate_how_it_works" %>
      </div>
		</div>
	</div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <%= image_tag(asset_path('undraw_winners_ao2o.svg'), alt: "Encuentra todo el Empleo Digital en We Are Hiring", width: 500) %>
  </div>
</section>

<section class="section">
	<div class="container">
		<div class="columns">
			<div class="column has-text-centered">
				<h2 class="title"> Colaboramos con </h2>
			</div>
		</div>
		<%= render 'partners' %>
	</div>
</section>

<%= content_for :head do %>
	<%= render "seo", 
			title: t('seo.candidate_signup'), 
			description: t('seo.candidate_signup_description'),
			image: image_url(asset_path('logo_black.png')) %>
<% end %>

<%= content_for :footer do %>
  <script>
    function checkPass() {
      var pass1 = document.getElementById('user_password');
      var pass2 = document.getElementById('user_password_confirmation');
      var message = document.getElementById('error-message');
      var submitBtn = document.getElementById('signupSubmit');
      var successColor = "#48c78e";
      var successColorLight = "#dff5eb";
      var errorColor = "#f14668";
      var errorColorLight = "#f5b8c4";
        
      if (pass1.value.length >= 8) {
        pass1.style.borderColor = successColor;
        pass1.style.backgroundColor = successColorLight;
        message.style.color = successColor;
        submitBtn.removeAttribute("disabled");
        message.innerHTML = "";
      } else {
        pass1.style.borderColor = errorColor;
        pass1.style.backgroundColor = errorColorLight;
        message.style.color = errorColor;
        submitBtn.setAttribute("disabled", "disabled");
        message.innerHTML = "La contraseña debe contener al menos 8 carácteres"
        return;
      }
      
      if (pass1.value == pass2.value) {
        pass2.style.borderColor = successColor;
        pass2.style.backgroundColor = successColorLight;
        message.style.color = successColor;
        submitBtn.removeAttribute("disabled");
        message.innerHTML = "";
      } else {
        pass2.style.borderColor = errorColor;
        pass2.style.backgroundColor = errorColorLight;
        message.style.color = errorColor;
        message.innerHTML = "Las contraseñas no coinciden";
        submitBtn.setAttribute("disabled", "disabled");
      }
    }  
  </script>
<% end %>